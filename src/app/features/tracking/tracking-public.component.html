<div class="tracking-container">
  <!-- HEADER PÃšBLICO -->
  <div class="tracking-header">
    <div class="logo">
      <h1>ğŸššRastrea tu Pedido </h1>
      <p>Garantiza la entrega a tiempo</p>
    </div>
  </div>

  <!-- FORMULARIO DE BÃšSQUEDA -->
  <div class="search-section">
    <div class="search-card">
      <h2>ğŸ” Rastrea tu EnvÃ­o</h2>
      <p class="subtitle">Ingresa numero de seguimiento Ã³ remesa para ver el estado de tu envÃ­o</p>
      <p class="subtitle">ALgunos envios son TRK-0707-wvlj - TRK-8414-czjx - TRK-1505-lysf</p>

      <div class="search-box">
        <input 
          type="text" 
          [(ngModel)]="trackingNumber"
          (keyup.enter)="searchShipment()"
          placeholder="Ej: TRK-001"
          class="search-input"
          [disabled]="loading">
        
        <button 
          class="btn-search" 
          (click)="searchShipment()"
          [disabled]="loading || !trackingNumber.trim()">
          {{ loading ? 'â³ Buscando...' : 'ğŸ” Buscar' }}
        </button>

        <button 
          class="btn-clear" 
          (click)="clearSearch()"
          *ngIf="trackingNumber"
          [disabled]="loading">
          âœ–ï¸ Limpiar
        </button>
      </div>
    </div>
  </div>

  <!-- MENSAJE DE ERROR -->
  <div class="error-box" *ngIf="errorMessage && searched">
    <div class="error-content">
      <span class="error-icon">âš ï¸</span>
      <span class="error-text">{{ errorMessage }}</span>
    </div>
  </div>

  <!-- SPINNER DE CARGA -->
  <div class="loading-box" *ngIf="loading">
    <div class="spinner"></div>
    <p>Buscando tu envÃ­o...</p>
  </div>

  <!-- DETALLES DEL ENVÃO -->
  <div class="shipment-details" *ngIf="shipment && !loading">
    <!-- ESTADO PRINCIPAL -->
    <div class="status-card" [ngClass]="getStatusClass(shipment.status)">
      <div class="status-icon">{{ getStatusIcon(shipment.status) }}</div>
      <div class="status-info">
        <div class="status-header">
          <h3>{{ shipment.status }}</h3>
          <span class="active-badge" [class.active]="shipment.is_active" [class.inactive]="!shipment.is_active">
            {{ shipment.is_active ? 'âœ“ Activo' : 'âœ— Inactivo' }}
          </span>
        </div>
        <p class="tracking-label">NÃºmero de Seguimiento:</p>
        <p class="tracking-value">{{ shipment.tracking_number }}</p>
      </div>
    </div>

    <!-- INFORMACIÃ“N DE RUTA -->
    <div class="info-card">
      <h3>ğŸ“ InformaciÃ³n de Ruta</h3>
      <div class="route-visual">
        <div class="route-point">
          <span class="route-icon">ğŸ¢</span>
          <div class="route-details">
            <p class="route-label">Origen</p>
            <p class="route-value">{{ shipment.origin }}</p>
          </div>
        </div>
        
        <div class="route-line"></div>
        
        <div class="route-point">
          <span class="route-icon">ğŸ“</span>
          <div class="route-details">
            <p class="route-label">Destino</p>
            <p class="route-value">{{ shipment.destination }}</p>
          </div>
        </div>
      </div>
    </div>

    <!-- INFORMACIÃ“N DE TRANSPORTE -->
    <div class="info-card" *ngIf="shipment.plate || shipment.conductor">
      <h3>ğŸš› InformaciÃ³n de Transporte</h3>
      <div class="info-grid">
        <div class="info-item" *ngIf="shipment.conductor">
          <span class="info-label">Conductor:</span>
          <span class="info-value">{{ shipment.conductor.third_name }}</span>
        </div>
        <div class="info-item" *ngIf="shipment.plate">
          <span class="info-label">Placa del VehÃ­culo:</span>
          <span class="info-value plate">{{ shipment.plate }}</span>
        </div>
      </div>
    </div>

    <!-- INFORMACIÃ“N RNDC -->
    <div class="info-card" *ngIf="shipment.remesa || shipment.manifiesto || shipment.weight">
      <h3>ğŸ“‹ InformaciÃ³n RNDC</h3>
      <div class="info-grid">
        <div class="info-item" *ngIf="shipment.remesa">
          <span class="info-label">Remesa:</span>
          <span class="info-value">{{ shipment.remesa }}</span>
        </div>
        <div class="info-item" *ngIf="shipment.manifiesto">
          <span class="info-label">Manifiesto:</span>
          <span class="info-value">{{ shipment.manifiesto }}</span>
        </div>
        <div class="info-item" *ngIf="shipment.date_manifiesto">
          <span class="info-label">Fecha Manifiesto:</span>
          <span class="info-value">{{ shipment.date_manifiesto | date:'dd/MM/yyyy' }}</span>
        </div>
        <div class="info-item" *ngIf="shipment.weight">
          <span class="info-label">Peso:</span>
          <span class="info-value">{{ shipment.weight }} kg</span>
        </div>
      </div>
    </div>

    <!-- PARTICIPANTES -->
    <div class="info-card">
      <h3>ğŸ‘¥ InformaciÃ³n de tu Pedido</h3>
      <div class="info-grid">
        <div class="info-item" *ngIf="shipment.remitente">
          <span class="info-label">Remitente:</span>
          <span class="info-value">{{ shipment.remitente.third_name }}</span>
        </div>
        <div class="info-item" *ngIf="shipment.destinatario">
          <span class="info-label">Destinatario:</span>
          <span class="info-value">{{ shipment.destinatario.third_name }}</span>
        </div>
        <div class="info-item" *ngIf="shipment.mercancia">
          <span class="info-label">MercancÃ­a:</span>
          <span class="info-value">{{ shipment.mercancia.mercan_name }}</span>
        </div>
      </div>
    </div>

    <!-- OBSERVACIONES -->
    <div class="info-card" *ngIf="shipment.observation">
      <h3>ğŸ“ Observaciones</h3>
      <p class="observation-text">{{ shipment.observation }}</p>
    </div>

    <!-- RECIBIR POR EMAIL -->
    <div class="info-card email-card">
      <h3>ğŸ“§ Si deseas enviar la trazabilidad de tu remesa registra tu correo aqui</h3>
      <p class="email-subtitle">Enviaremos los detalles de este envÃ­o a tu correo electrÃ³nico</p>
      
      <div class="email-form">
        <input 
          type="email" 
          placeholder="zona_logistica@zonlog.com"
          class="email-input"
          [(ngModel)]="userEmail">
        
        <button 
          class="btn-send-email" 
          disabled
          title="Funcionalidad disponible prÃ³ximamente">
          ğŸ“§ Enviar por Email
        </button>
      </div>
      
    </div>

    <!-- BOTONES DE ACCIÃ“N -->
    <div class="action-section">
      <button class="btn-print" (click)="printShipmentDetails()" title="Imprimir informaciÃ³n del envÃ­o">
        ğŸ–¨ï¸ Imprimir
      </button>
      <button class="btn-new-search" (click)="clearSearch()">
        ğŸ” Buscar Otro EnvÃ­o
      </button>
    </div>
  </div>

  <!-- FOOTER -->
  <div class="tracking-footer">
    <p>Â¿Tienes una cuenta? <a routerLink="/login">Iniciar SesiÃ³n</a></p>
  </div>
</div>
